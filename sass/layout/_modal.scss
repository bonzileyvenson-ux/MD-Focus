.modal-backdrop-hidden {
  display: none;
}

.modal-backdrop {
  display: block;
  position: fixed;
  inset: 0 0 0 0;
  z-index: 10000;
  backdrop-filter: blur(5rem);
  overflow-y: auto;
  overflow-x: hidden;
  // background-color: rgba(15, 15, 15, 0.363);

  @include landscape-desktop {
    position: relative;
    backdrop-filter: none;
    background-color: transparent;
    width: 30vw;
    height: 100vh; // Altura fixa para permitir scroll
    max-height: 100vh;

    // Ocultar scrollbar no Firefox
    scrollbar-width: none;

    // Ocultar scrollbar no Chrome, Safari, Edge
    &::-webkit-scrollbar {
      display: none;
    }
  }
}

.modal-header {
  background-color: rgb(39 63 91);
  @include flex-center;
  gap: 2rem;
  // @include box-shadow-primary;
  color: rgb(255, 255, 255);
  max-height: 8vh;
  min-height: 5.5rem;
  width: 100%;
  margin: 0 auto;
  padding: 0 1.5rem;

  .titulo-modal {
    font-size: 2.5rem;
    max-width: 70rem;
    text-align: center;
  }

  .close-btn {
    width: 5rem;
    background-color: none;
    color: #fff;

    i {
      font-size: 3rem;
      cursor: pointer;
    }
  }

  @include landscape-desktop {
    display: none;
  }
}

.modal-body {
  width: 100vw;
  padding-bottom: 4rem; // Espaço no final para permitir scroll completo

  @include landscape-desktop {
    width: 100%;
    box-shadow: none;
    background-color: none;
    // border-left: 5px solid clr(primary);
    padding-bottom: 8rem; // Espaço extra no final para garantir que o botão apareça
  }
}
.mt-4 {
  text-align: center;
  padding-top: 2rem;
  font-size: 2rem;
  color: rgb(18, 51, 88);
  margin-bottom: 1rem;
  @include landscape-desktop {
    color: rgb(39, 63, 91);
  }
}

.list-group {
  width: 90%;
  max-width: 60rem; /* Adicionado max-width para controlar a largura máxima no desktop */
  margin: 0 auto;
  padding: 1rem;
  border: 1px solid clr-M(secondary);
  border-radius: 2rem;
  li {
    list-style: none;
  }

  @include landscape-desktop {
    border: 1px solid clr(primary);
    position: relative;
    box-shadow: 0 1.2rem 1.6rem -0.6rem rgba(8, 14, 17, 0.35);
  }
}

.mt-5 {
  text-align: center;
  padding-top: 2rem;
  font-size: 1.6rem;

  color: clr-M(primary);

  @include landscape-desktop {
    color: clr(primary);
  }
}

.btn {
  width: 1.5rem;
  height: 1.5rem;
  padding: 1rem;
  @include flex-center;
  background-color: #8a8383;
  color: #ffffff;
  border: none;
  cursor: pointer;
  font-size: 1.6rem;
}

.historico-item-card {
  position: relative;
  padding: 1rem;
  border-radius: 3rem;
}

.historico-item-data {
  width: 100%;
  @include flex-between;
  gap: 2rem;
  font-size: 1.6rem;
}

.edicao-in-place {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: hsl(202.86deg 29.58% 86.08%);
  box-shadow: 0.4rem 0.3rem 0.3rem 0 rgba(8, 14, 17, 0.35);
  border-radius: 0.5rem;
  @include flex-between;
  gap: 1rem;
  padding: 1.5rem;

  z-index: 1;
}

/* Oculta o container inicialmente */
.edita-pontos-hidden {
  display: none !important;
}

.btn-corrigir {
  background-color: transparent;
  color: clr(dark-blue);
}

.card-data-valor {
  color: clr(dark-blue);
  font-size: 1.5rem;
}

.edit-botoes {
  height: 100%;
  width: 30%;
  @include flex-between;
  margin: 0 auto;

  .btn-success {
    border-top-left-radius: 1rem;
    border-bottom-left-radius: 1rem;
    flex: 1;
    width: 100%;
    color: #115a0a;
  }

  .btn-cancelar-correcao {
    border-top-right-radius: 1rem;
    border-bottom-right-radius: 1rem;
    flex: 1;
    width: 100%;
    color: #bd0f0f;
  }
}

.input-correcao {
  background-color: transparent;
  outline: none;
  border: none;
  width: 100%;
  max-width: 70%;
}

.h3-media-semanal {
  margin-top: 2rem;
  font-size: 2rem;
  text-align: center;
  color: #fcfcfc;
  background-color: clr-M(primary);
  @include landscape-desktop {
    box-shadow: inset 0.5rem 0 0.5rem 0 rgba(8, 14, 17, 0.3),
      inset -0.5rem 0 0.5rem 0 rgba(8, 14, 17, 0.3);
    background-color: clr(primary);
  }
}

.form-group {
  @include flex-column;
  align-items: center;
  gap: 1rem;
  margin-top: 2rem;
  @include landscape-desktop {
    max-width: 60rem;
    margin: 0 auto;
  }

  label {
    color: clr-M(primary);
    font-weight: 700;
    @include landscape-desktop {
      color: clr(primary);
      margin-top: 1rem;
    }
  }

  .observacao-text {
    width: 90%;
    min-height: 3rem;
    background-color: hsla(192, 11%, 91%, 0.767);
    border-radius: 0.5rem;
    outline: none;
    padding: 1rem;
    margin: 0 auto;
    border: 1px solid clr(primary);
  }
}

.btn-modal-solicitar {
  padding: 1.2rem 2.4rem;
  background: linear-gradient(135deg, clr(tercery), darken(clr(tercery), 8%));
  border: none;
  border-right: 3px solid darken(clr(tercery), 15%);
  border-radius: 0.8rem;
  color: clr(blanco);
  font-size: 1.6rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08rem;
  margin-top: 1.5rem;
  margin-bottom: 2rem;
  cursor: pointer;
  box-shadow: 0 0.4rem 1.2rem rgba(218, 131, 18, 0.4);
  @include transition;
  width: auto;
  display: inline-block;

  &:hover {
    background: linear-gradient(
      135deg,
      lighten(clr(tercery), 5%),
      clr(tercery)
    );
    box-shadow: 0 0.6rem 1.8rem rgba(218, 131, 18, 0.6);
    transform: translateY(-2px);
  }

  &:active {
    transform: translateY(0);
    box-shadow: 0 0.2rem 0.8rem rgba(218, 131, 18, 0.5);
  }
}

.historico-item-fieldset {
  border: none;
  border-radius: 0.5rem;
  padding: 0.5rem 1rem;
  position: relative;
  width: 100%;
  background-color: clr(light);
  box-shadow: 1px 1px 0.3rem 0.2rem rgba(0, 0, 0, 0.4);
}

.historico-item-legend {
  width: auto;
  padding: 0.1rem 0.5rem;
  margin: auto;
  font-size: 1.4rem;
  color: clr(blanco);
  border-radius: 0 1rem 0 1rem;

  background-color: rgb(39 63 91);
}

// Melhorias de legibilidade mobile
@media (max-width: 480px) {
  .modal-header {
    max-height: 7vh;
    min-height: 5rem;
    padding: 0 1rem;
    gap: 1rem;

    .titulo-modal {
      font-size: 2rem;
    }

    .close-btn {
      width: 4rem;

      i {
        font-size: 2.5rem;
      }
    }
  }

  .modal-body {
    padding-bottom: 2rem;
  }

  .mt-4 {
    font-size: 1.8rem;
    padding-top: 1rem;
  }

  .mt-5 {
    font-size: 1.4rem;
  }

  .list-group {
    width: 95%;
    padding: 0.8rem;
  }

  .btn {
    width: 1.8rem;
    height: 1.8rem;
    padding: 1.2rem;
    font-size: 1.6rem;
  }

  .historico-item-card {
    padding: 0.8rem;
  }

  .historico-item-data {
    font-size: 1.4rem;
    gap: 1rem;
  }

  .card-data-valor {
    font-size: 1.4rem;
  }

  .btn-modal-solicitar {
    font-size: 1.6rem;
    padding: 1rem 2rem;
  }

  .edit-botoes {
    .btn-success,
    .btn-cancelar-correcao {
      font-size: 1.4rem;
      padding: 0.8rem 1rem;
    }
  }

  .historico-item-legend {
    font-size: 1.3rem;
    padding: 0.2rem 0.6rem;
  }

  .form-group {
    gap: 0.8rem;
    margin-top: 1rem;

    .observacao-text {
      width: 95%;
      min-height: 2.5rem;
      padding: 0.8rem;
    }
  }

  .h3-media-semanal {
    font-size: 1.6rem;
    margin-top: 1rem;
  }
}

// Ajuste específico para telas muito pequenas (iPhone SE - 320px)
@media (max-width: 360px) {
  .modal-header {
    max-height: 6vh;
    min-height: 4.5rem;
    padding: 0 0.5rem;

    .titulo-modal {
      font-size: 1.6rem;
    }

    .close-btn {
      width: 3.5rem;

      i {
        font-size: 2rem;
      }
    }
  }

  .mt-4 {
    font-size: 1.6rem;
  }

  .historico-item-data {
    font-size: 1.2rem;
  }

  .card-data-valor {
    font-size: 1.2rem;
  }

  .btn {
    width: 1.5rem;
    height: 1.5rem;
    padding: 1rem;
    font-size: 1.4rem;
  }

  .historico-item-legend {
    font-size: 1.1rem;
  }
}
