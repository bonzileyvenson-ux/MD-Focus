<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Teste de Dias Úteis</title>
  </head>
  <body>
    <h1>Teste de Dias Úteis - Novembro 2025</h1>
    <div id="result"></div>

    <script>
      function pad(numero) {
        return String(numero).padStart(2, "0");
      }

      function toISO(ano, indiceMes, dia) {
        return `${ano}-${pad(indiceMes + 1)}-${pad(dia)}`;
      }

      function getDaysOfMonth(year, monthIndex) {
        const dias = [];
        const ultimoDia = new Date(year, monthIndex + 1, 0).getDate();

        for (let dia = 1; dia <= ultimoDia; dia++) {
          dias.push(toISO(year, monthIndex, dia));
        }

        return dias;
      }

      const ano = 2025;
      const mes = 10; // Novembro (0-indexed)
      const diasDoMes = getDaysOfMonth(ano, mes);

      const hoje = new Date();
      hoje.setHours(0, 0, 0, 0);

      let html =
        '<table border="1" cellpadding="5"><tr><th>#</th><th>Data ISO</th><th>Dia Semana</th><th>É Útil?</th><th>Já Passou?</th></tr>';
      let count = 0;

      diasDoMes.forEach((isoDate) => {
        const [anoISO, mesISO, diaISO] = isoDate.split("-").map(Number);
        const dataObj = new Date(anoISO, mesISO - 1, diaISO, 12, 0, 0, 0);
        const diaSemana = dataObj.getDay();
        const nomesDias = ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "Sáb"];
        const isUtil = diaSemana !== 0 && diaSemana !== 6;
        const jaPassou = dataObj < hoje;

        if (isUtil) {
          count++;
          html += `<tr>
                    <td>${count}</td>
                    <td>${isoDate}</td>
                    <td>${nomesDias[diaSemana]}</td>
                    <td style="color: green">SIM</td>
                    <td>${jaPassou ? "SIM" : "NÃO"}</td>
                </tr>`;
        } else {
          html += `<tr style="background: #f0f0f0">
                    <td>-</td>
                    <td>${isoDate}</td>
                    <td>${nomesDias[diaSemana]}</td>
                    <td style="color: red">NÃO (fim de semana)</td>
                    <td>-</td>
                </tr>`;
        }
      });

      html += "</table>";
      html += `<p><strong>Total de dias úteis em Novembro/2025: ${count}</strong></p>`;
      html += `<p>Data de hoje (para comparação): ${hoje.toLocaleDateString(
        "pt-BR"
      )}</p>`;

      document.getElementById("result").innerHTML = html;
    </script>
  </body>
</html>
